[supervisord]
nodaemon=true
user=sandbox
logfile=/tmp/supervisord.log
pidfile=/tmp/supervisord.pid
childlogdir=/tmp

[program:xvfb]
command=/usr/bin/Xvfb :99 -screen 0 1280x1024x24
autostart=true
autorestart=true
stdout_logfile=/tmp/xvfb.log
stderr_logfile=/tmp/xvfb_err.log
priority=100

[program:fluxbox]
command=/usr/bin/fluxbox
environment=DISPLAY=":99"
autostart=true
autorestart=true
stdout_logfile=/tmp/fluxbox.log
stderr_logfile=/tmp/fluxbox_err.log
priority=200

[program:x11vnc]
command=/usr/bin/x11vnc -display :99 -forever -shared -rfbport 5900 -nopw
autostart=true
autorestart=true
stdout_logfile=/tmp/x11vnc.log
stderr_logfile=/tmp/x11vnc_err.log
priority=300

[program:websockify]
command=/usr/bin/websockify --web=/usr/share/novnc 6080 localhost:5900
autostart=true
autorestart=true
stdout_logfile=/tmp/websockify.log
stderr_logfile=/tmp/websockify_err.log
priority=400

[program:chromium]
command=/usr/bin/chromium --no-sandbox --disable-gpu --disable-software-rasterizer --disable-dev-shm-usage --remote-debugging-port=9222 --remote-debugging-address=0.0.0.0 --user-data-dir=/tmp/chromium --start-maximized
environment=DISPLAY=":99"
autostart=true
autorestart=true
stdout_logfile=/tmp/chromium.log
stderr_logfile=/tmp/chromium_err.log
priority=500

[program:sandbox-server]
command=/usr/local/bin/sandbox-server
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
priority=600

[program:mcp-hub]
command=/usr/local/bin/mcp-hub
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
priority=700

[program:nginx]
command=/usr/sbin/nginx -g "daemon off;"
autostart=true
autorestart=true
stdout_logfile=/tmp/nginx.log
stderr_logfile=/tmp/nginx_err.log
priority=800
